<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>/srv/www/node_modules/gfm/node_modules/error-provider/README.md</title>
<link type="text/css" rel="stylesheet" media="screen" href="../../../../gfm_res/highlight.css">
<link type="text/css" rel="stylesheet" media="screen" href="../../../../gfm_res/github2.css">
<link type="text/css" rel="stylesheet" media="screen" href="../../../../gfm_res/github1.css">
<link type="text/css" rel="stylesheet" media="screen" href="../../../../gfm_res/github.css">
</head>
<body>
<div id="content">
<div id="readme" class="announce instapaper_body md">
<span class="name">
<span class="mini-icon mini-icon-readme"></span>
/srv/www/node_modules/gfm/node_modules/error-provider/README.md
</span>
<article class="markdown-body">
<h1>error-provider</h1>
<p><em>Node.js project</em></p>
<h4>Manages errors for third-party modules</h4>
<p>Version: 0.0.2</p>
<p>When you&#39;re writing a third-party module you&#39;ll probably deal with errors. If you want to send custom errors to your users you should send a code and then in your documentation explain these codes.</p>
<p>This module eases the error management, you only need to give a number, a code and a description and when you need them just get and throw them.</p>
<p>The built-in errors are also available so if you need to manually throw a <code>EEXIST</code> you can do so.</p>
<p>The error description accepts variables, that is, you can create an error with a variable and when you get it you can set the variable value:</p>
<pre><code class="language-javascript">ep.create (<span class="number">1000</span>, <span class="string">"MY_CUSTOM_ERROR"</span>, <span class="string">"This is a {which} error"</span>);
console.log (ep.get (<span class="string">"MY_CUSTOM_ERROR"</span>, { which: <span class="string">"custom"</span> }));

<span class="comment">/*
Prints:

{ [Error: MY_CUSTOM_ERROR]
  errno: 1000,
  code: "MY_CUSTOM_ERROR",
  description: "This is a custom error" }
*/</span></code></pre>
<p>If you want to add another property different from <code>errno</code>, <code>code</code> and <code>description</code> you can do it, just pass an object with the new properties (if the property value is a string it can also have variables):</p>
<pre><code class="language-javascript">ep.create (ep.next (), <span class="string">"MY_CUSTOM_ERROR"</span>, <span class="string">"This is a {which} error"</span>, {
    path: <span class="string">"{path}"</span>,
    fn: <span class="function"><span class="keyword">function</span> <span class="params">()</span>{</span>
        console.log (<span class="string">"custom error"</span>);
    }
});
<span class="keyword">var</span> error = ep.get (<span class="string">"MY_CUSTOM_ERROR"</span>, { which: <span class="string">"custom"</span>, path: <span class="string">"some/path"</span> });
error.fn ();
console.log (error);

<span class="comment">/*
Prints:

custom error
{ [Error: MY_CUSTOM_ERROR]
  errno: 100,
  code: "MY_CUSTOM_ERROR",
  description: "This is a custom error",
  path: "some/path",
  fn: [Function] }
*/</span></code></pre>
<h4>Installation</h4>
<pre><code>npm install error-provider</code></pre>
<h4>Example</h4>
<pre><code class="language-javascript"><span class="keyword">var</span> ep = require (<span class="string">"error-provider"</span>);

console.log (ep.get (ep.ENOENT));

<span class="keyword">var</span> n = ep.next ();
ep.create (n, <span class="string">"TEST1"</span>, <span class="string">"test 1"</span>);
console.log (ep.get (ep.TEST1));
console.log (ep.get (<span class="string">"TEST1"</span>));
console.log (ep.get (n));

<span class="comment">/*
Prints:

{ [Error: ENOENT]
  errno: 34,
  code: "ENOENT",
  description: "no such file or directory" }
{ [Error: TEST1] errno: 100, code: "TEST1", description: "test 1" }
{ [Error: TEST1] errno: 100, code: "TEST1", description: "test 1" }
{ [Error: TEST1] errno: 100, code: "TEST1", description: "test 1" }
*/</span></code></pre>
<h4>Methods</h4>
<ul>
<li><a href="#create">ep.create(errno, code, description[, properties])</a></li>
<li><a href="#get">ep.get(id[, vars])</a></li>
<li><a href="#next">ep.next()</a></li>
</ul>
<p><a name="create"></a>
<strong>ep.create(errno, code, description[, properties])</strong><br>Creates an error with an id, code, description and additional properties.</p>
<p>The strings can contain variables that can be set later. A variable is a name encapsulated inside curly braces:</p>
<pre><code class="language-javascript">ep.create (ep.next (), <span class="string">"TEST1"</span>, <span class="string">"Test 1"</span>, {
    path: <span class="string">"{p}"</span>
});
console.log (ep.get (<span class="string">"TEST1"</span>, { p: <span class="string">"some/path"</span> }));

<span class="comment">/*
Prints:

{ [Error: TEST1]
  errno: 100,
  code: "TEST1",
  description: "Test 1",
  path: "some/path" }
*/</span></code></pre>
<p><a name="get"></a>
<strong>ep.get(id[, vars])</strong><br>Returns an error. It can be a Node.js built-in error such as <code>ENOENT</code> or one that was created previously.</p>
<p>The <code>id</code> can be a Number, String or Object:</p>
<pre><code class="language-javascript">ep.create (ep.next (), <span class="string">"TEST1"</span>, <span class="string">"Test 1"</span>);
console.log (ep.get (ep.TEST1));
console.log (ep.get (<span class="string">"TEST1"</span>));
console.log (ep.get (<span class="number">100</span>));</code></pre>
<p>If <code>vars</code> is provided, the variables found in the error properties that are String will be set with the given value.</p>
<pre><code class="language-javascript">ep.create (ep.next (), <span class="string">"TEST1"</span>, <span class="string">"Test {number}"</span>, {
    n: <span class="string">"{number}"</span>,
    p: <span class="string">"{value}"</span>
});
console.log (ep.get (<span class="string">"TEST1"</span>, { number: <span class="number">1</span>, value: <span class="string">"ok"</span> }));

<span class="comment">/*
Prints:

{ [Error: TEST1]
  errno: 100,
  code: "TEST1",
  description: "Test 1",
  n: "1",
  p: "ok" }
*/</span></code></pre>
<p><a name="next"></a>
<strong>ep.next()</strong><br>Returns the next available error number and increments the counter. This number is an identifier to create errors.</p>
<p>The first available number starts at 100.</p>
<p>The following example creates three errors with identified with 100, 101 and 102.</p>
<pre><code class="language-javascript">ep.create (ep.next (), ...);
ep.create (ep.next (), ...);
ep.create (ep.next (), ...);</code></pre>
</article>
</div>
</div>
</body></html>